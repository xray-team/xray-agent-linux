# Коллекторы
Все метрики собираются с помощью коллекторов.  
Каждый коллектор представляет собой небольшой модуль, который позволяет собирать определенные метрики, имеет собственную конфигурацию и ограничения.  
Любой из коллекторов можно отключить, если метрики, которые он собирает не нужны.

Список коллекторов:
- [uptime](collectors.md#uptime)
- [loadAvg](collectors.md#loadavg)
- [ps](collectors.md#ps)

## uptime
### Описание
Коллектор uptime собирает следующие метрики из /proc/uptime:

| Имя метрики | Тип     | Источник данных | Описание                                                                                                                              |
|-------------|---------|-----------------|---------------------------------------------------------------------------------------------------------------------------------------|
| Uptime      | counter | /proc/uptime    | Время работы системы с момента последней загрузки в секундах.                                                                         |
| Idle        | counter | /proc/uptime    | Сумма времени простоя всех cpu(ядер) в секундах. Для систем с количеством ядер больше 1 данное значение может быть больше чем Uptime. |

### Конфигурация
```json
{
  "collectors": {
    "uptime": {
      "enabled": true
    }
  }
}
```
* **"enabled"**
  * **true** - включить коллектор
  * **false** - отключить коллектор

## loadAvg
### Описание
Коллектор loadAvg собирает следующие метрики из /proc/loadavg:

| Имя метрики              | Тип    | Источник данных | Описание                                                                                                 |
|--------------------------|--------|-----------------|----------------------------------------------------------------------------------------------------------|
| Last                     | gauge  | /proc/loadavg   | Значение Load Average усредненное за 1 минуту.                                                           |
| Last5m                   | gauge  | /proc/loadavg   | Значение Load Average усредненное за 5 минут.                                                            |
| Last15m                  | gauge  | /proc/loadavg   | Значение Load Average усредненное за 15 минут.                                                           |
| KernelSchedulingEntities | gauge  | /proc/loadavg   | Количество объектов планирования ядра(процессы, потоки), которые в настоящее время существуют в системе. |

### Конфигурация
```json
{
  "collectors": {
    "loadAvg": {
      "enabled": true
    }
  }
}
```
* **"enabled"**
  * **true** - включить коллектор
  * **false** - отключить коллектор

## ps
### Описание
Коллектор ps собирает следующую статистику по процессам в системе:

| Имя метрики      | Тип    | Источник данных         | Описание                                      |
|------------------|--------|-------------------------|-----------------------------------------------|
| Count            | gauge  | /proc/\[pid\]/stat      | Количество запущенных процессов в системе.    |
| Limit            | gauge  | /sys/kernel/pid_max     | Максимальное допустимое количество процессов. |
| InStateRunning   | gauge  | /proc/\[pid\]/stat      | Количество процессов в состоянии running.     | 
| InStateIdle      | gauge  | /proc/\[pid\]/stat      | Количество процессов в состоянии idle.        |
| InStateSleeping  | gauge  | /proc/\[pid\]/stat      | Количество процессов в состоянии sleeping.    |
| InStateDiskSleep | gauge  | /proc/\[pid\]/stat      | Количество процессов в состоянии disk sleep.  |
| InStateStopped   | gauge  | /proc/\[pid\]/stat      | Количество процессов в состоянии stopped.     |
| InStateZombie    | gauge  | /proc/\[pid\]/stat      | Количество процессов в состоянии zombie.      |
| InStateDead      | gauge  | /proc/\[pid\]/stat      | Количество процессов в состоянии dead.        |
| Threads          | gauge  | /proc/\[pid\]/stat      | Количество запущенных потоков.                |
| ThreadsLimit     | gauge  | /sys/kernel/threads-max | Максимальное допустимое количество потоков.   | 
### Конфигурация
```json
{
  "collectors": {
    "ps": {
      "enabled": true
    }
  }
}
```
* **"enabled"**
  * **true** - включить коллектор
  * **false** - отключить коллектор